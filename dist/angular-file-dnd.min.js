(function(){"use strict";angular.module("omr.angularFileDnD",[]).directive("fileDropzone",function(){return{restrict:"A",scope:{file:"=",fileName:"="},link:function(a,b,c){var d,e,f,g,h;return e=function(a){var b;return b=a.dataTransfer||a.originalEvent.dataTransfer},g=function(a){return a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation)?!1:(e(a).effectAllowed="copy",!1)},h=c.fileDropzone,d=function(a){var b;return void 0===(b=c.maxFileSize)||""===b||a/1024/1024<c.maxFileSize?!0:(alert("File must be smaller than "+c.maxFileSize+" MB"),!1)},f=function(a){return void 0===h||""===h||h.indexOf(a)>-1?!0:(alert("Invalid file type.  File must be one of following types "+h),!1)},b.bind("dragover",g),b.bind("dragenter",g),b.bind("drop",function(b){var c,g,h,i,j;return null!=b&&b.preventDefault(),h=new FileReader,h.onload=function(b){return d(i)&&f(j)?(a.$apply(function(){return a.file=b.target.result,angular.isString(a.fileName)?a.fileName=g:void 0}),a.$emit("file-dropzone-drop-event",{unencodedFile:c,file:a.file,type:j,name:g,size:i})):void 0},c=e(b).files[0],g=c.name,j=c.type,i=c.size,h.readAsDataURL(c),!1})}}})}).call(this);
(function(){"use strict";angular.module("omr.angularFileDnD",[]).directive("fileDropzone",function(){return{require:"^form",restrict:"A",scope:{file:"=",fileName:"=",dropzoneHoverClass:"@"},link:function(a,b,c,d){var e,f,g,h,i;return f=function(a){var b;return b=a.dataTransfer||a.originalEvent.dataTransfer},h=function(c){return c&&(b.addClass(a.dropzoneHoverClass),c.preventDefault&&c.preventDefault(),c.stopPropagation)?!1:(f(c).effectAllowed="copy",!1)},i=c.fileDropzone,e=function(a){var b;return void 0===(b=c.maxFileSize)||""===b||a/1024/1024<c.maxFileSize?!0:(alert("File must be smaller than "+c.maxFileSize+" MB"),!1)},g=function(a){return void 0===i||""===i||i.indexOf(a)>-1?!0:(alert("Invalid file type.  File must be one of following types "+i),!1)},b.bind("dragover",h),b.bind("dragenter",h),b.bind("dragleave",function(){return b.removeClass(a.dropzoneHoverClass)}),b.bind("drop",function(c){var h,i,j,k,l;return null!=c&&c.preventDefault(),b.removeClass(a.dropzoneHoverClass),j=new FileReader,j.onload=function(b){return e(k)&&g(l)?(a.$apply(function(){return a.file=b.target.result,angular.isString(a.fileName)?a.fileName=i:void 0}),d.$pristine=!1,d.$dirty=!0,a.$emit("file-dropzone-drop-event",{file:a.file,type:l,name:i,size:k})):void 0},h=f(c).files[0],i=h.name,l=h.type,k=h.size,j.readAsDataURL(h),!1})}}})}).call(this);
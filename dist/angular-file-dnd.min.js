(function(){"use strict";angular.module("omr.angularFileDnD",[]).directive("fileDropzone",function(){return{restrict:"A",scope:{file:"=",fileName:"=",dropzoneHoverClass:"@"},link:function(a,b,c){var d,e,f,g,h;return e=function(a){var b;return b=a.dataTransfer||a.originalEvent.dataTransfer},g=function(c){return c&&(b.addClass(a.dropzoneHoverClass),c.preventDefault&&c.preventDefault(),c.stopPropagation)?!1:(e(c).effectAllowed="copy",!1)},h=c.fileDropzone,d=function(a){var b;return void 0===(b=c.maxFileSize)||""===b||a/1024/1024<c.maxFileSize?!0:(alert("File must be smaller than "+c.maxFileSize+" MB"),!1)},f=function(a){return void 0===h||""===h||h.indexOf(a)>-1?!0:(alert("Invalid file type.  File must be one of following types "+h),!1)},b.bind("dragover",g),b.bind("dragenter",g),b.bind("dragleave",function(){return b.removeClass(a.dropzoneHoverClass)}),b.bind("drop",function(c){var g,h,i,j,k;return null!=c&&c.preventDefault(),b.removeClass(a.dropzoneHoverClass),i=new FileReader,i.onload=function(b){return d(j)&&f(k)?(a.$apply(function(){return a.file=b.target.result,angular.isString(a.fileName)?a.fileName=h:void 0}),a.$emit("file-dropzone-drop-event",{unencodedFile:g,file:a.file,type:k,name:h,size:j})):void 0},g=e(c).files[0],h=g.name,k=g.type,j=g.size,i.readAsDataURL(g),!1})}}})}).call(this);